<!DOCTYPE html>
<html lang="en">
<head th:include="fragments/head::header">
</head>
<style type="text/css">
.cell {
	margin: 15px auto;
}
</style>
<body>
	<div th:include="fragments/top::top"></div>

	<div class="main-container" id="main-container">
		<script type="text/javascript">
			try {
				ace.settings.check('main-container', 'fixed')
			} catch (e) {
			}
		</script>

		<div class="main-container-inner">
			<a class="menu-toggler" id="menu-toggler" href="#"> <span
				class="menu-text"></span>
			</a>

			<div th:include="fragments/left::left"></div>

			<div class="main-content">
				<div class="breadcrumbs" id="breadcrumbs">
					<script type="text/javascript">
						try {
							ace.settings.check('breadcrumbs', 'fixed')
						} catch (e) {
						}
					</script>

					<ul class="breadcrumb">
						<li><i class="icon-home home-icon"></i> <a href="#">首页</a></li>

						<li><a href="#">运营管理</a></li>
						<li><a href="#">专题管理</a></li>
						<li class="active">专题详情</li>
					</ul>
				</div>				
				<div class="page-content">
					<div class="row">
						<div class="col-xs-12 widget-container-span ui-sortable">
							<div class="widget-box transparent">
								<div class="widget-header">
									<h4 class="lighter">专题信息</h4>
									<div class="widget-toolbar no-border"></div>
								</div>
								<div class="widget-body">
									<div class="widget-main padding-6 no-padding-left no-padding-right">
										<div class="row">
											<div class="col-xs-8">
													<div class="cell col-xs-4">
														标题：<input th:field="${subject.title}" id="title" style="width:260px"/>
													</div>		
											</div>
											<div class="col-xs-8">
												<div class="cell col-xs-4">
														链接：<input th:field="${subject.link}" id="link" style="width:260px"/>
												</div>
											</div>
											<div class="col-xs-8">
												<div class="cell col-xs-4">
														专题首图：</div>
											</div>
											<div class="col-xs-8">
												<div class="cell col-xs-4">
														<img id="picture" style="width: 120px; height: 120px;" 
																th:src="${subject.picture}" />
														  <input class="upload" type="file" name="photo" />
												</div>
													
											</div>
										</div>
									</div>
								</div>			

							</div>
						</div>
					
							</div>
							<button type="button" class="btn btn-success" id="goback">返回</button>
							<button type="button"  class="btn btn-warning" id="publish">发布</button>
						</div>
			</div>
		</div>
				<!-- /.page-content -->
	</div>

			<div th:include="fragments/bottom::bottom"></div>

		<a href="#" id="btn-scroll-up"
			class="btn-scroll-up btn btn-sm btn-inverse"> <i
			class="icon-double-angle-up icon-only bigger-110"></i>
		</a>
	<!-- /.main-container -->

	<div th:include="fragments/js::js"></div>

	<!-- page specific plugin scripts -->
<script type="text/javascript">
 
//发布
<!--
(function(){
	var oBtn=document.querySelector('#publish');
	var oMyForm = new FormData();
    var url="/subject/add";
	oBtn.addEventListener('click',function(){
		var link=$('#link').val();
		var title=$('#title').val();
		var picture=$("#picture")[0].src;
		oMyForm.append('link',link);
		oMyForm.append('title',title);
		oMyForm.append('picture',picture);
		$.ajax({
			type:'POST',
			url:url,
			data:oMyForm,
			processData : false,
            contentType : false,  
			success:function(data){
				if(data){
					alert('保存成功！');
					location.href ="/subject/list";
				}
			},
			error:function(err){
				console.log(err);
			}
		});
	},false);
})();

$('.upload').on('change', function () {
	var oMyForm = new FormData();
	var oImg=$('.upload').get(0).files[0];
	oMyForm.append('test',oImg);
	$.ajax({
		type:'POST',
		url:'/subject/upload',
		data:oMyForm,
		processData : false,
        contentType : false,  
		success:function(data){
			if(data){
				$("#picture").attr('src',data); 
				
			}
		},
		error:function(err){
			console.log(err);
		}
	});
	});
$("#goback").click(function(){
	location.href ="/subject/list";
});

-->
</script>
</body>
</html>
